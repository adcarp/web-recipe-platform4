# Frontend & Backend Quick Reference

## ðŸŽ¨ Frontend - What Runs in the Browser

**Framework**: Next.js + React  
**Language**: TypeScript  
**Styling**: Tailwind CSS

### Frontend Responsibilities
âœ“ Display pages to users  
âœ“ Collect user input via forms  
âœ“ Validate form inputs  
âœ“ Show loading states  
âœ“ Display notifications (toasts)  
âœ“ Manage local state (component state)  
âœ“ Call Firebase SDK functions  
âœ“ Handle error display  

### Frontend File Locations
```
/src/app/          â†’ Pages & routing
/src/components/   â†’ Reusable components
/src/context/      â†’ Global state (auth)
/src/hooks/        â†’ Custom logic hooks
/src/types/        â†’ TypeScript interfaces
/src/lib/          â†’ Frontend utilities
```

### Example Frontend Flow
```
User visits /recipes/new
    â†“
Load RecipeForm component
    â†“
User fills form + uploads image
    â†“
Click "Create Recipe"
    â†“
JavaScript validates inputs (Frontend)
    â†“
Call Firebase SDK: addDoc(db, 'recipes', {...})
    â†“
Firebase processes request...
    â†“
Receive response
    â†“
Show toast: "Recipe created!"
    â†“
Redirect to /recipes/[id]
```

---

## ðŸ”§ Backend - Firebase Cloud Services

**Provider**: Google Cloud / Firebase  
**No code files**: Configured in Firebase Console

### Backend Services

#### 1. Authentication Service
âœ“ Sign up users (email/password)  
âœ“ Hash and encrypt passwords  
âœ“ Manage login sessions  
âœ“ Handle password reset  
âœ“ Issue auth tokens  

**Frontend calls**:
```typescript
import { createUserWithEmailAndPassword } from 'firebase/auth';
await createUserWithEmailAndPassword(auth, email, password);
```

#### 2. Firestore Database
âœ“ Store user documents (/users/{uid})  
âœ“ Store recipe documents (/recipes/{id})  
âœ“ Enforce security rules  
âœ“ Index queries for performance  
âœ“ Handle transactions  

**Frontend calls**:
```typescript
import { collection, addDoc, query, getDocs } from 'firebase/firestore';
await addDoc(collection(db, 'recipes'), {...});
```

#### 3. Cloud Storage
âœ“ Store user profile images  
âœ“ Store recipe images  
âœ“ Handle file upload/download  
âœ“ Generate signed URLs  
âœ“ Manage file deletions  

**Frontend calls**:
```typescript
import { ref, uploadBytes, getDownloadURL } from 'firebase/storage';
await uploadBytes(ref(storage, 'recipes/recipe1/image.jpg'), file);
```

---

## ðŸ”„ Request-Response Cycle

### When User Creates a Recipe

**Step 1: Frontend (Browser)**
```
RecipeForm.tsx
â”œâ”€â”€ Collect form data
â”œâ”€â”€ Validate inputs
â”‚   â”œâ”€â”€ Check title not empty
â”‚   â”œâ”€â”€ Check image < 5MB
â”‚   â”œâ”€â”€ Check ingredients not empty
â”‚   â””â”€â”€ Check steps not empty
â””â”€â”€ If valid â†’ proceed
   â””â”€â”€ If invalid â†’ show error message
```

**Step 2: Frontend â†’ Firebase (Over Internet)**
```
fetch('https://firestore.googleapis.com/...')
POST /recipes
Headers: {
  Authorization: Bearer {auth-token}
  Content-Type: application/json
}
Body: {
  title: "Pasta Recipe",
  description: "Delicious pasta",
  ingredients: [...],
  steps: [...],
  authorId: "user123",
  createdAt: "2026-01-13T..."
}
```

**Step 3: Firebase Backend**
```
Firestore Service
â”œâ”€â”€ Check if user authenticated
â”‚   â””â”€â”€ Verify auth token
â”œâ”€â”€ Check Firestore rules
â”‚   â”œâ”€â”€ Is user logged in?
â”‚   â””â”€â”€ Allowed to create?
â”œâ”€â”€ Validate data
â”‚   â”œâ”€â”€ Check required fields
â”‚   â””â”€â”€ Check data types
â””â”€â”€ Save to database
   â””â”€â”€ /recipes/{auto-id}
       â””â”€â”€ Store all fields
```

**Step 4: Firebase â†’ Frontend Response**
```
HTTP 200 OK
Body: {
  id: "recipe_abc123",
  title: "Pasta Recipe",
  ...
}
```

**Step 5: Frontend Update**
```
RecipeForm.tsx
â”œâ”€â”€ Receive success response
â”œâ”€â”€ Show toast: "Recipe created!"
â”œâ”€â”€ Update local state
â””â”€â”€ Redirect to /recipes/abc123
```

---

## ðŸ“Š Frontend vs Backend Responsibilities

| Task | Frontend | Backend |
|------|----------|---------|
| **User enters recipe title** | âœ“ Collect input | - |
| **Validate title not empty** | âœ“ Check | âœ“ Verify |
| **Check user is logged in** | âœ“ Check state | âœ“ Verify token |
| **Upload recipe image** | âœ“ Pick file | âœ“ Store file |
| **Save recipe to database** | âœ“ Send request | âœ“ Write to DB |
| **Show success message** | âœ“ Display toast | - |
| **Encrypt password** | - | âœ“ Hash password |
| **Generate auth token** | - | âœ“ Issue token |
| **Validate security rules** | - | âœ“ Check permissions |

---

## ðŸ“ Project File Organization

```
What runs where?

BROWSER (Frontend)
â”œâ”€â”€ HTML generated by React components
â”œâ”€â”€ CSS from Tailwind classes
â”œâ”€â”€ JavaScript from TypeScript files
â”‚   â”œâ”€â”€ /src/app/*.tsx      â† Routes
â”‚   â”œâ”€â”€ /src/components/    â† Components
â”‚   â”œâ”€â”€ /src/hooks/         â† Logic
â”‚   â””â”€â”€ /src/context/       â† Global state
â””â”€â”€ Calls Firebase SDK â†’ sends requests over internet

FIREBASE CLOUD (Backend)
â”œâ”€â”€ Authentication service
â”œâ”€â”€ Firestore database
â”œâ”€â”€ Cloud Storage
â””â”€â”€ Security Rules
   â””â”€â”€ Protects data access
```

---

## ðŸ” When Do We Use Validation?

### Frontend Validation (UX Layer)
**When**: User types or submits  
**Why**: Quick feedback to user  
**Example**:
```typescript
if (!formData.title?.trim()) {
  setError('Title is required');
  return; // Stop submission
}
```

### Backend Validation (Security Layer)
**When**: Request arrives at Firebase  
**Why**: Prevent malicious data  
**Example** (Firestore Rules):
```
match /recipes/{recipeId} {
  allow create: if request.auth != null 
    && request.resource.data.title is string
    && request.resource.data.title.size() > 0;
}
```

---

## ðŸš€ Common Operations

### User Signs Up
```
Frontend                        Backend
User fills form          â†’      Receive signup request
  â†“                             â†“
Validate inputs          â†’      Validate format
  â†“                             â†“
Call createUserWithEmail â†’      Hash password
                                Authenticate user
                         â†      Return auth token
Show success message
  â†“
Create /users/{uid} doc  â†’      Save user profile
  â†“
Redirect to home         â†      Confirm saved
```

### User Creates Recipe
```
Frontend                        Backend
Select image             â†’      Receive upload
  â†“                             â†“
Validate file            â†’      Validate MIME type
  â†“                             â†“
Upload to Storage        â†’      Store image
  â†“                             â†“
Get download URL         â†      Return URL
  â†“
Submit recipe form        â†’      Receive recipe data
  â†“                             â†“
                                Verify user auth
                         â†      Create /recipes/{id}
Show success toast
```

### User Views Recipes
```
Frontend                        Backend
Home page loads          â†’      Query request
  â†“                             â†“
                                Read /recipes collection
                         â†      Return array
  â†“
Display RecipeCard
for each recipe
```

### User Favorites Recipe
```
Frontend                        Backend
Click â¤ï¸ button          â†’      Update request
  â†“                             â†“
Disable button                  Add user to favoritedBy[]
  â†“                             â†“
                         â†      Increment favoritesCount
Update UI
```

---

## ðŸ“ Adding a New Feature - Step by Step

### Example: Add Recipe Rating System

**Step 1: Frontend - Create UI Component**
```
/src/components/RatingWidget.tsx
â”œâ”€â”€ Display stars
â”œâ”€â”€ Handle click
â””â”€â”€ Call Firebase update
```

**Step 2: Frontend - Add Validation**
```
Check rating 1-5
Show error if invalid
```

**Step 3: Frontend - Call Backend**
```typescript
await updateDoc(doc(db, 'recipes', recipeId), {
  rating: newRating
});
```

**Step 4: Backend - Update Firestore Rules**
```
match /recipes/{recipeId} {
  allow update: if request.resource.data.rating is number 
    && request.resource.data.rating >= 1 
    && request.resource.data.rating <= 5;
}
```

**Step 5: Frontend - Update UI**
```
Show success toast
Update recipe display
```

---

## ðŸ› Debugging Tips

### Frontend Issues?
```
Browser DevTools
â”œâ”€â”€ F12 â†’ Console tab (JavaScript errors)
â”œâ”€â”€ F12 â†’ Network tab (Firebase requests)
â”œâ”€â”€ F12 â†’ Application (Local storage, cookies)
â””â”€â”€ Check React DevTools for state
```

### Backend Issues?
```
Firebase Console
â”œâ”€â”€ Firestore Tab
â”‚   â”œâ”€â”€ View collections
â”‚   â””â”€â”€ Check documents
â”œâ”€â”€ Authentication Tab
â”‚   â”œâ”€â”€ View users
â”‚   â””â”€â”€ Check auth errors
â””â”€â”€ Storage Tab
    â””â”€â”€ View uploaded files
```

### Common Problems
```
"Document not found" â†’ Check Firestore rules
"Permission denied" â†’ Check auth token validity
"Upload failed" â†’ Check file size & format
"User not created" â†’ Check console for errors
```

---

## ðŸ“š Key Files & Their Purpose

| File | Purpose | Type |
|------|---------|------|
| `/src/app/page.tsx` | Home page | Frontend |
| `/src/app/recipes/new/page.tsx` | Create recipe page | Frontend |
| `/src/components/RecipeForm.tsx` | Recipe form component | Frontend |
| `/src/hooks/useFavorites.ts` | Favorite logic | Frontend |
| `/src/lib/firebase.ts` | Firebase config | Frontend |
| `firestore.rules` | Database permissions | Backend |
| `firestore.indexes.json` | Database indexes | Backend |
| `DATABASE_STRUCTURE.md` | Schema reference | Documentation |
| `ARCHITECTURE.md` | Architecture guide | Documentation |
